<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>esp-nimble-cpp: Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">esp-nimble-cpp<span id="projectnumber">&#160;2.3.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2github_2workspace_2_c_h_a_n_g_e_l_o_g.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Changelog</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="changelog"></a>All notable changes to this project will be documented in this file.</p>
<h1><a class="anchor" id="autotoc_md233-2025-09-05"></a>
[2.3.3] 2025-09-05</h1>
<h1><a class="anchor" id="fixed"></a>
Fixed</h1>
<ul>
<li>NimBLEAdvertisedDevice::isConnectable returning incorrect result.</li>
<li>Extended advertisements not reporting full data.</li>
</ul>
<h1><a class="anchor" id="added"></a>
Added</h1>
<ul>
<li>Support up to 1650 bytes of advertisement with extended advertising</li>
</ul>
<h1><a class="anchor" id="autotoc_md232-2025-09-02"></a>
[2.3.2] 2025-09-02</h1>
<h1><a class="anchor" id="fixed-1"></a>
Fixed</h1>
<ul>
<li>Build failures with esp-idf versions 4.x.</li>
<li>Workaround for upstream issue causing onConnectFail to not be called.</li>
<li>Build failures with idf v5.5+ and specific roles are not enabled.</li>
</ul>
<h1><a class="anchor" id="changed"></a>
Changed</h1>
<ul>
<li>Allow peripheral and central roles to be used without broadcaster/observer roles.</li>
<li>Where applicable, <code>MYNEWT_VAL_</code> macros are used to control feature availability instead of <code>CONFIG_</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md231-2025-06-11"></a>
[2.3.1] 2025-06-11</h1>
<h1><a class="anchor" id="fixed-2"></a>
Fixed</h1>
<ul>
<li>Build errors when disabling BLE roles.</li>
<li><code>NimBLEClient::readValue</code> call not returning when the instance was created with a<code>NimBLEServer</code> and reading a secured characteristic.</li>
<li><code>NimBLEScan</code> destructor potentially causing a crash.</li>
</ul>
<h1><a class="anchor" id="added-1"></a>
Added</h1>
<ul>
<li><code>NimBLEBeacon::BeaconData</code> <code>std::vector&lt;uint8_t&gt;</code> operator to allow it to be used as a parameter to <code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a0b076298058755149b4351727d70b198" title="Set manufacturer specific data.">NimBLEAdvertisementData::setManufacturerData</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md230-2025-05-19"></a>
[2.3.0] 2025-05-19</h1>
<h1><a class="anchor" id="fixed-3"></a>
Fixed</h1>
<ul>
<li>Incorrect <code>NimBLECharacteristic::onSubscribe</code> value when indications are set.</li>
<li><code>NimBLECharacteristic::onRead</code> callback not called in some cases.</li>
<li>Clear attribute value when zero length value is written.</li>
<li>Notify/Indicate incorrectly returning success with custom value.</li>
<li>Corrected NimBLEClient array initialization.</li>
<li>Prevent potential exception when scan is restarted.</li>
<li>Attribute getValue failing with some data types</li>
<li>Incorrectly passing a pointer to a function taking const reference.</li>
</ul>
<h1><a class="anchor" id="added-2"></a>
Added</h1>
<ul>
<li>Support for esp32c5</li>
<li>L2CAP infrastructure.</li>
<li>Scan duplicate cache reset time.</li>
</ul>
<h1><a class="anchor" id="changed-1"></a>
Changed</h1>
<ul>
<li>Cleaned up examples.</li>
<li>Allow PHY updates without enabling extended advertising.</li>
</ul>
<h1><a class="anchor" id="autotoc_md221-2025-02-28"></a>
[2.2.1] 2025-02-28</h1>
<h1><a class="anchor" id="fixed-4"></a>
Fixed</h1>
<ul>
<li>Added back <code>NimBLEClient::connect</code> overload with <code>NimBLEAdvertisedDevice</code> parameter to resolve connection error due to NULL address.</li>
<li>Crash caused by returning invalid vector entry when retrieving remote descriptors.</li>
</ul>
<h1><a class="anchor" id="autotoc_md220-2025-02-24"></a>
[2.2.0] 2025-02-24</h1>
<h1><a class="anchor" id="fixed-5"></a>
Fixed</h1>
<ul>
<li>Crash when calling <code>NimBLEClient::DiscoverAttributes</code>.</li>
</ul>
<h1><a class="anchor" id="added-3"></a>
Added</h1>
<ul>
<li>Conditional macros for logging.</li>
<li><code><a class="el" href="class_nim_b_l_e_device_callbacks.html" title="Callbacks associated with a BLE device.">NimBLEDeviceCallbacks</a></code> class with a callback for handling bond storage.</li>
</ul>
<h1><a class="anchor" id="autotoc_md211-2025-01-26"></a>
[2.1.1] 2025-01-26</h1>
<h1><a class="anchor" id="fixed-6"></a>
Fixed</h1>
<ul>
<li>remote descriptor discovery error when no descriptors exist.</li>
<li>scan filter settings not enabled for esp32s3/c3.</li>
<li>remote descriptor discovery returning more than the desired descriptor.</li>
</ul>
<h1><a class="anchor" id="autotoc_md210-2025-01-12"></a>
[2.1.0] 2025-01-12</h1>
<h1><a class="anchor" id="fixed-7"></a>
Fixed</h1>
<ul>
<li>Crash when retrieving descriptors if more than one exists.</li>
<li>Incorrect TX power value being advertised.</li>
<li>New user guide code for 2.x</li>
<li>Potential race condition if `NimBLEScan::clearResults1 is called from multiple tasks.</li>
</ul>
<h1><a class="anchor" id="changed-2"></a>
Changed</h1>
<ul>
<li>If privacy is not enabled identity keys will not be shared.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Retrieve the Scan object that we use for scanning.">NimBLEDevice::setPower</a></code> and <code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> now take an additional parameter <code>NimBLETxPowerType</code> to set/get the power level for different operations.</li>
</ul>
<h1><a class="anchor" id="added-4"></a>
Added</h1>
<ul>
<li>Config option <code>CONFIG_NIMBLE_CPP_ADDR_FMT_EXCLUDE_DELIMITER</code>, if defined will remove the ":" delimiter from the BLE address string.</li>
<li>Config option <code>CONFIG_NIMBLE_CPP_ADDR_FMT_UPPERCASE</code> if defined will make the BLE address strings uppercase.</li>
</ul>
<h1><a class="anchor" id="autotoc_md203-2025-01-05"></a>
[2.0.3] 2025-01-05</h1>
<h1><a class="anchor" id="fixed-8"></a>
Fixed</h1>
<ul>
<li>Unused variable warning when log level is below info.</li>
<li>Build error missing definition of CONFIG_NIMBLE_CPP_FREERTOS_TASK_BLOCK_BIT in platformio.</li>
<li>Race condition in <code>NimBLEScan</code> that can cause a crash due to heap corruption if <code>NimBLEScan::stop</code> is called from the <code>onResult</code> callback.</li>
<li>Advertisement data not set if scan response is enabled after the data is set.</li>
<li><code>NimBLECharacteristic</code>/<code>NimBLEDescriptor</code> not able to update their values in the <code>onRead</code> callback.</li>
<li>Too short of a timeout being requested in NimBLE_Server example leading to frequent disconnects.</li>
</ul>
<h1><a class="anchor" id="changed-3"></a>
Changed</h1>
<ul>
<li><code>NimBLEHIDDevice</code> now allows for the same report ID in multiple input/output/feature reports.</li>
</ul>
<h1><a class="anchor" id="added-5"></a>
Added</h1>
<ul>
<li>Config for custom log colors pre level.</li>
<li>Error logs in the case that NIMBLE_CPP_DEBUG_ASSERT is not defined.</li>
<li>Error logs when setting advertisement data fails.</li>
<li>Missing documentation in the migration guide about enabling automatic advertising on disconnect, which was disabled by default in 2.x.</li>
</ul>
<h1><a class="anchor" id="autotoc_md202-2024-12-21"></a>
[2.0.2] 2024-12-21</h1>
<h1><a class="anchor" id="fixed-9"></a>
Fixed</h1>
<ul>
<li>Compile error when only advertising role is enabled.</li>
<li>Possible crash if bonded client reconnects.</li>
</ul>
<h1><a class="anchor" id="changed-4"></a>
Changed</h1>
<ul>
<li><code>NimBLEHIDDevice</code> can now create more than one in/out/feature report map.</li>
</ul>
<h1><a class="anchor" id="autotoc_md201-2024-12-16"></a>
[2.0.1] 2024-12-16</h1>
<h1><a class="anchor" id="fixed-10"></a>
Fixed</h1>
<ul>
<li><code>NimBLEHIDDevice::getOutputReport</code> will now return the correct characteristic.</li>
<li>Compile error when central is disabled, class <code>NimBLEServer</code> has no member named <code>m_pClient</code>.</li>
</ul>
<h1><a class="anchor" id="changed-5"></a>
Changed</h1>
<ul>
<li>Added missing includes for <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code> and <code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code> to <code><a class="el" href="_nim_b_l_e_device_8h_source.html">NimBLEDevice.h</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md200-2024-12-14"></a>
[2.0.0] 2024-12-14</h1>
<h1><a class="anchor" id="breaking-changes"></a>
&lt;strong&gt;Breaking changes&lt;/strong&gt;</h1>
<ul>
<li>All connection oriented callbacks now receive a reference to <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code>, the <code>ble_gap_conn_desc</code> has also been replace with <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code> in the functions that received it.</li>
<li>All functions that take a time input parameter now expect the value to be in milliseconds instead of seconds.</li>
<li>Removed Eddystone URL as it has been shutdown by google since 2021.</li>
<li>NimBLESecurity class removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html" title="A model of a BLE Device from which all the BLE roles are created.">NimBLEDevice</a></code> Ignore list functions removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a8b6b4bedfe37725ed9c20e91a3470005" title="Start the connection securing and authorization for this connection.">NimBLEDevice::startSecurity</a></code> now returns a <code>bool</code>, true on success, instead of an int to be consistent with the rest of the library.</li>
<li><code>NimBLEDevice::getInitialized</code> renamed to <code><a class="el" href="class_nim_b_l_e_device.html#a425561f1e23856756ab9c1c330da5737" title="Check if the initialization is complete.">NimBLEDevice::isInitialized</a></code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Retrieve the Scan object that we use for scanning.">NimBLEDevice::setPower</a></code> no longer takes the <code>esp_power_level_t</code> and <code>esp_ble_power_type_t</code>, instead only an integer value in dbm units is accepted.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> no longer takes a <code>bool nrpa</code> parameter.</li>
<li><code>NimBLEDevice::getClientListSize</code> replaced with <code>NimBLEDevice::getCreatedClientCount</code>.</li>
<li><code>NimBLEDevice::getClientList</code> was removed.</li>
<li><code>NimBLEServer::disconnect</code> now returns <code>bool</code>, true = success, instead of <code>int</code> to be consistent with the rest of the library.</li>
<li><code>NimBLEServerCallbacks::onMTUChanged</code> renamed to <code>NimBLEServerCallbacks::onMTUChange</code> to be consistent with the client callback.</li>
<li><code>NimBLEServer::getPeerIDInfo</code> renamed to <code>NimBLEServer::getPeerInfoByHandle</code> to better describe it's use.</li>
<li><code>NimBLEServerCallbacks::onPassKeyRequest</code> has been replaced with <code>NimBLEServer::onPassKeyDisplay</code> which should display the pairing pin that the client is expected to send.</li>
<li><code>NimBLEServerCallbacks::onAuthenticationComplete</code> now takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter.</li>
<li><code>NimBLEClient::getServices</code> now returns a const reference to std::vector&lt;NimBLERemoteService*&gt; instead of a pointer to the internal vector.</li>
<li><code>NimBLEClient::getConnId</code> has been renamed to <code>getConnHandle</code> to be consistent with bluetooth terminology.</li>
<li><code>NimBLEClient::disconnect</code> now returns a <code>bool</code>, true on success, instead of an int to be consistent with the rest of the library.</li>
<li><code>NimBLEClientCallbacks::onDisconnect</code> now takes an additional <code>int reason</code> parameter to let the application know why the disconnect occurred.</li>
<li><code>NimBLEClientCallbacks::onPassKeyRequest</code> has been changed to <code>NimBLEClientCallbacks::onPassKeyEntry</code> which takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter and does not return a value. Instead or returning a value this callback should prompt a user to enter a pin number which is sent later via <code>NimBLEDevice::injectPassKey</code>.</li>
<li><code>NimBLEClientCallbacks::onConfirmPIN</code> renamed to <code>NimBLEClientCallbacks::onConfirmPasskey</code> and no longer returns a value and now takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter. This should be used to prompt a user to confirm the pin on the display (YES/NO) after which the response should be sent with <code>NimBLEDevice::injectConfirmPasskey</code>.</li>
<li><code>NimBLEAdvertising::setMinPreferred</code> and <code>NimBLEAdvertising::setMaxPreferred</code> have been removed, use <code><a class="el" href="class_nim_b_l_e_advertising.html#a9dbb66ca66aa040731fcfd737f881469" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertising::setPreferredParams</a></code> instead.</li>
<li>Advertising the name and TX power of the device will no longer happen by default and should be set manually by the application.</li>
<li><code>NimBLEAdvertising::setAdvertisementType</code> has been renamed to <code><a class="el" href="class_nim_b_l_e_advertising.html#ae49d2bd91cabca46ec7c4bbd7fc49407" title="Set the type of connectable mode to advertise.">NimBLEAdvertising::setConnectableMode</a></code> to better reflect it's function.</li>
<li><code>NimBLEAdvertising::setScanResponse</code> has been renamed to <code><a class="el" href="class_nim_b_l_e_advertising.html#a6badd669ddf4ff8507561d5041d093d6" title="Enable scan response data.">NimBLEAdvertising::enableScanResponse</a></code> to better reflect it's function.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code>; Scan response is no longer enabled by default.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> No longer takes a callback pointer parameter, instead the new method <code><a class="el" href="class_nim_b_l_e_advertising.html#a3e81d7d3aa2b72b8db58427d4a42727b" title="Set the callback to be invoked when advertising stops.">NimBLEAdvertising::setAdvertisingCompleteCallback</a></code> should be used.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a67f4d6869eb2797bc78389adf20cb59e" title="Add data to the payload to be advertised.">NimBLEAdvertisementData::addData</a></code> now takes either a <code>std::vector&lt;uint8_t&gt;</code> or <code>uint8_t* + length</code> instead of <code>std::string</code> or <code>char + length</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a2f6960683e8b98d1c3ecf88bb5ec56eb" title="Retrieve the payload that is to be advertised.">NimBLEAdvertisementData::getPayload</a></code> now returns <code>std::vector&lt;uint8_t&gt;</code> instead of <code>std::string</code>.</li>
<li>The callback parameter for <code>NimBLEScan::start</code> has been removed and the blocking overload of <code>NimBLEScan::start</code> has been replaced by an overload of <code>NimBLEScan::getResults</code> with the same parameters.</li>
<li><code>NimBLEAdvertisedDeviceCallbacks</code> Has been replaced by <code>NimBLEScanCallbacks</code> which contains the following methods: <code>onResult</code>, <code>onScanEnd</code>, and <code>onDiscovered</code></li>
<li><code>-</code>NimBLEScanCallbacks::onResult<code>, functions the same as the old</code>NimBLEAdvertisedDeviceCallbacks::onResult<code>but now takes aa</code>const NimBLEAdvertisedDevice*<code>instead of non-const.</code></li>
<li><code>-</code>NimBLEScanCallbacks::onScanEnd<code>, replaces the scanEnded callback passed to</code>NimBLEScan::start<code>and now takes a</code>const NimBLEScanResults&amp;<code>and</code>int reason<code>parameter.</code></li>
<li><code>-</code>NimBLEScanCallbacks::onDiscovered<code>, This is called immediately when a device is first scanned, before any scan response data is available and takes a</code>const NimBLEAdvertisedDevice*<code>parameter. -</code>NimBLEScan::stop<code>will no longer call the</code>onScanEnd<code>callback as the caller should know its been stopped when this is called. -</code>NimBLEScan::clearDuplicateCache<code>has been removed as it was problematic and only for the esp32. Stop and start the scanner for the same effect. -</code>NimBLEScanResults::getDevice<code>methods now return</code>const NimBLEAdvertisedDevice*<code>. -</code>NimBLEScanResults<code>iterators are now</code>const_iterator<code>. -</code>NimBLEAdvertisedDevice::hasRSSI<code>removed as redundant, RSSI is always available. -</code>NimBLEAdvertisedDevice::getPayload<code>now returns</code>const std::vector&lt;uint8_t&gt;<code>instead of a pointer to internal memory. -</code>NimBLEAdvertisedDevice<code>Timestamp removed, if needed then the app should track the time from the callback. -</code>NimBLECharacteristic::notify<code>no longer takes a</code>bool is_notification<code>parameter, instead</code>indicate()<code>should be called to send indications. -</code>NimBLECharacteristicCallbacks::onNotify<code>removed as unnecessary, the library does not call notify without app input. -</code>NimBLECharacteristicCallbacks::onStatus<code>No longer takes a</code>status<code>parameter, refer to the return code for success/failure. -</code>NimBLERemoteCharacteristic::getRemoteService<code>now returns a</code>const NimBLERemoteService*<code>instead of non-const. -</code>NimBLERemoteCharacteristic::readUInt32<code>Has been removed. -</code>NimBLERemoteCharacteristic::readUInt16<code>Has been removed. -</code>NimBLERemoteCharacteristic::readUInt8<code>Has been removed. -</code>NimBLERemoteCharacteristic::readFloat<code>Has been removed. -</code>NimBLERemoteCharacteristic::registerForNotify<code>Has been removed. -</code>NimBLERemoteService::getCharacteristics<code>now returns a</code>const std::vector&lt;NimBLERemoteCharacteristic*&gt;&amp;<code>instead of non-const</code>std::vector&lt;NimBLERemoteCharacteristic*&gt;*<code>. -</code>NimBLERemoteService::getValue<code>now returns</code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a><code>instead of</code>std::string<code>. -</code>NimBLEService::getCharacteristics<code>now returns a</code>const std::vector&lt;NimBLECharacteristic*&gt;&amp;<code>instead of std::vector&lt;NimBLECharacteristic *&gt;. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#acf379fca7d3689a73e6750d7ab50a0af" title="Get the uuid value.">NimBLEUUID::getNative</a><code>method replaced with</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#a68c61ae225675ac84d60f76058a5bdd4" title="Get a pointer to the NimBLE UUID base structure.">NimBLEUUID::getBase</a><code>which returns a read-only pointer to the underlying</code>ble_uuid_t<code>struct. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a><code>;</code>msbFirst<code>parameter has been removed from constructor, caller should reverse the data first or call the new</code>reverseByteOrder<code>method after. -</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a><code>constructor; default value for the</code>type<code>parameter removed, caller should know the address type and specify it. -</code>NimBLEAddress::getNative<code>replaced with</code><a class="el" href="class_nim_b_l_e_address.html#a31b466293f6cb752d5aba6b6ffb95351" title="Get the NimBLE base struct of the address.">NimBLEAddress::getBase</a><code>and now returns a pointer to</code>const ble_addr_t<code>instead of a pointer to the address value. -</code><a class="el" href="class_nim_b_l_e_address.html#a826fe8850cbc7d54f0696b8af4637169" title="Determine if this address equals another.">NimBLEAddress::equals</a><code>method and</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a>::== operator<code>will now also test if the address types are the same. -</code>NimBLEUtils::dumpGapEvent<code>function removed. -</code>NimBLEUtils::buildHexData<code>replaced with</code><a class="el" href="class_nim_b_l_e_utils.html#a53f0b19687b0706ec48d6b630e209acb" title="Create a hexadecimal string representation of the input data.">NimBLEUtils::dataToHexString</a><code>, which returns a</code>std::string<code>containing the hex string. -</code>NimBLEEddystoneTLM::setTemp<code>now takes an</code>int16_t<code>parameter instead of float to be friendly to devices without floating point support. -</code>NimBLEEddystoneTLM::getTemp<code>now returns</code>int16_t<code>to work with devices that don't have floating point support. -</code>NimBLEEddystoneTLM::setData<code>now takes a reference to *</code>NimBLEEddystoneTLM::BeaconData<code>instead of</code>std::string<code>. -</code>NimBLEEddystoneTLM::getData<code>now returns a reference to *</code>NimBLEEddystoneTLM::BeaconData<code>instead of</code>std::string<code>. -</code>NimBLEBeacon::setData<code>now takes</code>const NimBLEBeacon::BeaconData&amp;<code>instead of</code>std::string<code>. -</code>NimBLEBeacon::getData<code>now returns</code>const NimBLEBeacon::BeaconData&amp;<code>instead of</code>std::string<code>. -</code>NimBLEHIDDevice::reportMap<code>renamed to</code>NimBLEHIDDevice::getReportMap<code>. -</code>NimBLEHIDDevice::hidControl<code>renamed to</code>NimBLEHIDDevice::getHidControl<code>. -</code>NimBLEHIDDevice::inputReport<code>renamed to</code>NimBLEHIDDevice::getInputReport<code>. -</code>NimBLEHIDDevice::outputReport<code>renamed to</code>NimBLEHIDDevice::getOutputReport<code>. -</code>NimBLEHIDDevice::featureReport<code>renamed to</code>NimBLEHIDDevice::getFeatureReport<code>. -</code>NimBLEHIDDevice::protocolMode<code>renamed to</code>NimBLEHIDDevice::getProtocolMode<code>. -</code>NimBLEHIDDevice::bootOutput<code>renamed to</code>NimBLEHIDDevice::getBootOutput<code>. -</code>NimBLEHIDDevice::pnp<code>renamed to</code>NimBLEHIDDevice::setPnp<code>. -</code>NimBLEHIDDevice::hidInfo<code>renamed to</code>NimBLEHIDDevice::setHidInfo<code>. -</code>NimBLEHIDDevice::deviceInfo<code>renamed to</code>NimBLEHIDDevice::getDeviceInfoService<code>. -</code>NimBLEHIDDevice::hidService<code>renamed to</code>NimBLEHIDDevice::getHidService<code>. -</code>NimBLEHIDDevice::batteryService<code>renamed to</code>NimBLEHIDDevice::getBatteryService`.</li>
</ul>
<h1><a class="anchor" id="fixed-11"></a>
Fixed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> and <code>NimBLEDevice::getPowerLevel</code> bug worked around for the esp32s3 and esp32c3.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Retrieve the Scan object that we use for scanning.">NimBLEDevice::setPower</a></code> and <code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> now support the full power range for all esp devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> will now correctly apply the provided address type for all devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> (esp32) return value is now calculated to support devices with different min/max ranges.</li>
<li>Crash if <code><a class="el" href="class_nim_b_l_e_device.html#a66362258c033860e8448032913be355f" title="Shutdown the NimBLE stack/controller.">NimBLEDevice::deinit</a></code> is called when the stack has not been initialized.</li>
<li><code>NimBLEServer</code> service changed notifications will now wait until the changes have taken effect and the server re-started before indicating the change to peers, reducing difficultly for some clients to update their data.</li>
<li><code>NimBLEService::getHandle</code> will now fetch the handle from the stack if not valid to avoid returning an invalid value.</li>
<li><code>std::vector</code> input to set/write values template.</li>
<li><code>NimBLEHIDDevice::pnp</code> will now set the data correctly.</li>
<li>Check for Arduino component</li>
<li>Fixed building with esp-idf version 5.x.</li>
<li>Fixed pairing failing when the process was started by the peer first.</li>
<li>Fixed building with esp-idf and Arduino component.</li>
<li>Workaround for esp32s3 and esp32c3 not returning the correct txPower with some IDF versions.</li>
</ul>
<h2><a class="anchor" id="changed-6"></a>
Changed</h2>
<ul>
<li><code>NimBLEClient::secureConnection</code> now takes an additional parameter <code>bool async</code>, if true, will send the secure command and return immediately with a true value for successfully sending the command, else false. This allows for asynchronously securing a connection.</li>
<li>Deleting the client instance from the <code>onDisconnect</code> callback is now supported.</li>
<li><code>NimBLEClient::connect</code> will no longer cancel already in progress connections.</li>
<li><code>NimBLEClient::setDataLen</code> now returns bool, true if successful.</li>
<li><code>NimBLEClient::updateConnParams</code> now returns bool, true if successful.</li>
<li><code>NimBLEClient::setPeerAddress</code> now returns a bool, true on success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a8b6b4bedfe37725ed9c20e91a3470005" title="Start the connection securing and authorization for this connection.">NimBLEDevice::startSecurity</a></code> now takes and additional parameter <code>int* rcPtr</code> which will provide the return code from the stack if provided.</li>
<li><code>NimBLEDevice::deleteClient</code> no longer blocks tasks.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a77f9f343143d4f074ffb545dd14cbb2b" title="Get our device address.">NimBLEDevice::getAddress</a></code> will now return the address currently in use.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a2e8bb71daabbffd9eab8787493a45ce7" title="Initialize the BLE environment.">NimBLEDevice::init</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a66362258c033860e8448032913be355f" title="Shutdown the NimBLE stack/controller.">NimBLEDevice::deinit</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a179d1199badd67464cab921672a44405" title="Set a custom callback for gap events.">NimBLEDevice::setCustomGapHandler</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> now returns a bool with <code>true</code> indicating success and works with non-esp32 devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Retrieve the Scan object that we use for scanning.">NimBLEDevice::setPower</a></code> now returns a bool value, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a43b83de25635b69cfd663a7f0e7784d6" title="Setup local mtu that will be used to negotiate mtu during request from client peer.">NimBLEDevice::setMTU</a></code> now returns a bool value, true = success.</li>
<li><code>NimBLEDevice::deleteAllBonds</code> now returns true on success, otherwise false.</li>
<li><code>NimBLEEddystoneTLM</code> internal data struct type <code>BeaconData</code> is now public and usable by the application.</li>
<li><code>NimBLEBeacon</code> internal data struct type <code>BeaconData</code> is now public and can be used by the application.</li>
<li>Removed tracking of client characteristic subscription status from <code>NimBLEServer</code> and <code>NimBLECharacteristic</code> and instead uses the functions and tracking in the host stack.</li>
<li><code>NimBLECharacteristic::indicate</code> now takes the same parameters as <code>notify</code>.</li>
<li><code>NimBLECharacteristic::notify</code> and <code>NimBLECharacteristic::indicate</code> now return a <code>bool</code>, true = success.</li>
<li>Added optional <code>connHandle</code> parameter to <code>NimBLECharacteristic::notify</code> to allow for sending notifications to specific clients.</li>
<li><code>NimBLEServer</code> Now uses a std::array to store client connection handles instead of std::vector to reduce memory allocation.</li>
<li><code>NimBLEExtAdvertisement</code> : All functions that set data now return <code>bool</code>, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Advertising data is now stored in instances of <code>NimBLEAdvertisingData</code> and old vectors removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ab8afd94479ebac3996fa3712d3d92325" title="Set the advertisement data that is to be broadcast in a regular advertisement.">NimBLEAdvertising::setAdvertisementData</a></code> and <code><a class="el" href="class_nim_b_l_e_advertising.html#a97798e6d9d7721eb588c5e67d54e97ef" title="Set the data that is to be provided in a scan response.">NimBLEAdvertising::setScanResponseData</a></code> now return <code>bool</code>, true = success.</li>
<li>Added optional <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a></code> parameter to <code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> to allow for directed advertising to a peer.</li>
<li>All <code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> functions that change data values now return <code>bool</code>, true = success.</li>
<li>All <code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> functions that change data values now return <code>bool</code>, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> advertising complete callback is now defined as std::function to allow for using std::bind for callback functions.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#adf8f35c7735f8a29130482b302f04006" title="Set the complete name of this device.">NimBLEAdvertisementData::setName</a></code> now takes an optional <code>bool</code> parameter to indicate if the name is complete or incomplete, default = complete.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> moved to it's own .h and .cpp files.</li>
<li><code>NimBLEScan::start</code> takes a new <code>bool restart</code> parameter, default <code>true</code>, that will restart an already in progress scan and clear the duplicate filter so all devices will be discovered again.</li>
<li>Scan response data that is received without advertisement first will now create the device and send a callback.</li>
<li><code>NimBLEScan::start</code> will no longer clear cache or results if scanning is already in progress.</li>
<li><code>NimBLEScan::start</code> will now allow the start command to be sent with updated parameters if already scanning.</li>
<li><code>NimBLEScan::clearResults</code> will now reset the vector capacity to 0.</li>
<li>Host reset will now no longer restart scanning and instead will call <code>NimBLEScanCallbacks::onScanEnd</code>.</li>
<li>Added optional <code>index</code> parameter to <code>NimBLEAdvertisedDevice::getPayloadByType</code></li>
<li><code>NimBLEAdvertisedDevice::getManufacturerData</code> now takes an optional index parameter for use in the case of multiple manufacturer data fields.</li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Add missing GAP event strings.</li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Add missing return code strings.</li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Event/error code strings optimized.</li>
<li><code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a></code> cleanup and optimization.</li>
<li>cleaned up code, removed assert/abort calls, replaced with a configurable option to enable debug asserts.</li>
</ul>
<h2><a class="anchor" id="added-6"></a>
Added</h2>
<ul>
<li>(esp32 specific) <code>NimBLEDevice::setPowerLevel</code> and <code>NimBLEDevice::getPowerLevel</code> which take and return the related <code>esp_power_level*</code> types.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a0e021958df2f2dbf40e52b9022c37594" title="Set the preferred default phy to use for connections.">NimBLEDevice::setDefaultPhy</a></code> which will set the default preferred PHY for all connections.</li>
<li><code>NimBLEDevice::getConnectedClients</code>, which returns a vector of pointers to the currently connected client instances.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a0f6521729222f9e55e40325824786070" title="Set the device address to use.">NimBLEDevice::setOwnAddr</a></code> function added, which takes a <code>uint8_t*</code> or <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a>&amp;</code> and will set the mac address of the device, returns <code>bool</code> true= success.</li>
<li><code>NimBLEDevice::injectPassKey</code> Used to send the pairing passkey instead of a return value from the client callback.</li>
<li><code>NimBLEDevice::injectConfirmPasskey</code> Used to send the numeric comparison pairing passkey confirmation instead of a return value from the client callback.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a></code> to change the device name after initialization.</li>
<li><code>NimBLECharacteristic::create2904</code> which will specifically create a Characteristic Presentation Format (0x2904) descriptor.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ad899be16fa054a01908692a504af9832" title="Refresh advertsing data dynamically without stop/start cycle. For instance allows refreshing manufact...">NimBLEAdvertising::refreshAdvertisingData</a></code> refreshes the advertisement data while still actively advertising.</li>
<li><code>NimBLEClient::updatePhy</code> to request a PHY change with a peer.</li>
<li><code>NimBLEClient::getPhy</code> to read the current connection PHY setting.</li>
<li><code>Config</code> struct to <code>NimBLEClient</code> to efficiently set single bit config settings.</li>
<li><code>NimBLEClient::setSelfDelete</code> that takes the bool parameters <code>deleteOnDisconnect</code> and <code>deleteOnConnectFail</code>, which will configure the client to delete itself when disconnected or the connection attempt fails.</li>
<li><code>NimBLEClient::setConfig</code> and <code>NimBLEClient::getConfig</code> which takes or returns a <code>NimBLEClient::Config</code> object respectively.</li>
<li><code>NimBLEClient::cancelConnect()</code> to cancel an in-progress connection, returns <code>bool</code>, true = success.</li>
<li>Non-blocking <code>NimBLEClient::connect</code> option added via 2 new <code>bool</code> parameters added to the function:</li>
<li>* <code>asyncConnect</code>; if true, will send the connect command and return immediately.</li>
<li>* <code>exchangeMTU</code>; if true will send the exchange MTU command upon connection.</li>
<li><code>NimBLEClientCallbacks::onConnectFail</code> callback that is called when the connection attempt fail while connecting asynchronously.</li>
<li><code>NimBLEClientCallbacks::onMTUChange</code> callback which will be called when the MTU exchange completes and takes a <code>NimBLEClient*</code> and <code>uint16_t MTU</code> parameter.</li>
<li><code>NimBLEClientCallbacks::onPhyUpdate</code> and -<code>NimBLEServerCallbacks::onPhyUpdate</code> Which are called when the PHY update is complete.</li>
<li>Extended scan example.</li>
<li><code>NimBLEServer::updatePhy</code> to request a PHY change with a peer.</li>
<li><code>NimBLEServer::getPhy</code> to read the PHY of a peer connection.</li>
<li><code>NimBLEServer::getClient</code> which will create a client instance from the provided peer connHandle or connInfo to facilitate reading/write from the connected client.</li>
<li><code>NimBLEServerCallbacks::onConnParamsUpdate</code> callback.</li>
<li><code>NimBLEScan::erase</code> overload that takes a <code>const NimBLEAdvertisedDevice*</code> parameter.</li>
<li><code>NimBLEScan::setScanPhy</code> to enable/disable the PHY's to scan on (extended advertising only).</li>
<li><code>NimBLEScan::setScanPeriod</code> which will allow for setting a scan restart timer in the controller (extended advertising only).</li>
<li><code>NimBLEAdvertisedDevice::isScannable()</code> that returns true if the device is scannable.</li>
<li><code>NimBLEAdvertisedDevice::begin</code> and <code>NimBLEAdvertisedDevice::end</code> read-only iterators for convenience and use in range loops.</li>
<li><code>NimBLEAdvertisedDevice::getAdvFlags</code> returns the advertisement flags of the advertiser.</li>
<li><code>NimBLEAdvertisedDevice::getPayloadByType</code> Generic use function that returns the data from the advertisement with the specified type.</li>
<li><code>NimBLEAdvertisedDevice::haveType</code> Generic use function that returns true if the advertisement data contains a field with the specified type.</li>
<li>Support for esp32c6, esp32c2, esp32h2, and esp32p4.</li>
<li><code>NimBLEExtAdvertisement::removeData</code>, which will remove the data of the specified type from the advertisement.</li>
<li><code>NimBLEExtAdvertisement::addServiceUUID</code>, which will append to the service uuids advertised.</li>
<li><code>NimBLEExtAdvertisement::removeServiceUUID</code>, which will remove the service from the uuids advertised.</li>
<li><code>NimBLEExtAdvertisement::removeServices</code>, which will remove all service uuids advertised.</li>
<li>New overloads for <code>NimBLEExtAdvertisement::setServiceData</code> with the parameters <code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid, const uint8_t* data, size_t length</code> and <code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid, const std::vector&lt;uint8_t&gt;&amp; data</code>.</li>
<li><code>NimBLEExtAdvertisement::getDataLocation</code>, which returns the location in the advertisement data of the type requested in parameter <code>uint8_t type</code>.</li>
<li><code>NimBLEExtAdvertisement::toString</code> which returns a hex string representation of the advertisement data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a1e23657839038e5219f9c009cf360a32" title="Get the current advertisement data.">NimBLEAdvertising::getAdvertisementData</a></code>, which returns a reference to the currently set advertisement data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ae0e7d64d51882830750bcb87e2d9678c" title="Get the current scan response data.">NimBLEAdvertising::getScanData</a></code>, which returns a reference to the currently set scan response data.</li>
<li>New overloads for <code><a class="el" href="class_nim_b_l_e_advertising.html#aba383012133dd694f56cf86966b2d80a" title="Remove a service UUID from the advertisement.">NimBLEAdvertising::removeServiceUUID</a></code> and <code><a class="el" href="class_nim_b_l_e_advertisement_data.html#ad22fa3253134dd5bfd3e76f8c31bef2e" title="Remove a service UUID from the advertisement.">NimBLEAdvertisementData::removeServiceUUID</a></code> to accept a <code>const char*</code></li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#af7cee42f24ad38872936a0bbc9e2ac1e" title="Clear the advertisement and scan response data and set the flags to BLE_HS_ADV_F_DISC_GEN.">NimBLEAdvertising::clearData</a></code>, which will clear the advertisement and scan response data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ac433e3458ac5259ae21c4bdbd1198781" title="Set the advertised manufacturer data.">NimBLEAdvertising::setManufacturerData</a></code> Overload that takes a <code>const uint8_t*</code> and , size_t<code>parameter. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a><code>Overload that takes</code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid<code>,</code> const uint8_t* data<code>,</code> size_t length<code>as parameters. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a><code>Overload that takes</code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid<code>,</code>const std::vector&lt;uint8_t&gt;&amp;<code>as parameters. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a710eacfc97ecea1bf9a9a3569c58d410" title="Set the discoverable mode to use.">NimBLEAdvertising::setDiscoverableMode</a><code>to allow applications to control the discoverability of the advertiser. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a3e81d7d3aa2b72b8db58427d4a42727b" title="Set the callback to be invoked when advertising stops.">NimBLEAdvertising::setAdvertisingCompleteCallback</a><code>sets the callback to call when advertising ends. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a9dbb66ca66aa040731fcfd737f881469" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertising::setPreferredParams</a><code>that takes the min and max preferred connection parameters as an alternative for</code>setMinPreferred<code>and</code>setMaxPreferred<code>. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a28c082bb540325ada66b4e203ae6998a" title="Set the advertising interval.">NimBLEAdvertising::setAdvertisingInterval</a><code>Sets the advertisement interval for min and max to the same value instead of calling</code>setMinInterval<code>and</code>setMaxInterval<code>separately if there is not value difference. -</code><a class="el" href="class_nim_b_l_e_advertisement_data.html#acf839da2c36a9ac5ef53e86b57d73874" title="Remove data from the advertisement data.">NimBLEAdvertisementData::removeData</a><code>, which takes a parameter</code>uint8_t type<code>, the data type to remove. -</code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a6ff7fc36a9f5966792f354d2586714a6" title="Get the string representation of the advertisement data.">NimBLEAdvertisementData::toString</a><code>, which will print the data in hex. -</code><a class="el" href="class_nim_b_l_e_utils.html#a6b3a170f26ce51f353ff960f59739181" title="Blocks the calling task until released or timeout.">NimBLEUtils::taskWait</a><code>which causes the calling task to wait for an event. -</code><a class="el" href="class_nim_b_l_e_utils.html#a7b2de1e3827f9f6750550623dc6d9288" title="Release a task.">NimBLEUtils::taskRelease</a><code>releases the task from and event. -</code><a class="el" href="class_nim_b_l_e_utils.html#a6d47cf1adecd01d0102e0feec8232538" title="Generate a random BLE address.">NimBLEUtils::generateAddr</a><code>function added with will generate a random address and takes a</code>bool<code>parameter, true = create non-resolvable private address, otherwise a random static address is created, returns</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a><code>. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#acf379fca7d3689a73e6750d7ab50a0af" title="Get the uuid value.">NimBLEUUID::getValue</a><code>which returns a read-only</code>uint8_t<code>pointer to the UUID value. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#a9b96d90463f02f6a21afbaebcc242dd9" title="Reverse the byte order of the UUID.">NimBLEUUID::reverseByteOrder</a><code>, this will reverse the bytes of the UUID, which can be useful for advertising/logging. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a><code>constructor overload that takes a reference to</code>ble_uuid_any_t<code>. -</code><a class="el" href="class_nim_b_l_e_address.html#a9af65abe3c02a16307b8cffa3b1bcac1" title="Determine if this address is a Non-Resolvable Private Address.">NimBLEAddress::isNrpa</a><code>method to test if an address is random non-resolvable. -</code><a class="el" href="class_nim_b_l_e_address.html#a409e3ef141526c8f5c5fad99bd95b660" title="Determine if this address is a Static Address.">NimBLEAddress::isStatic</a><code>method to test if an address is random static. -</code><a class="el" href="class_nim_b_l_e_address.html#a7154780415ae201a1fcdf86298b6116c" title="Determine if this address is a Public Address.">NimBLEAddress::isPublic</a><code>method to test if an address is a public address. -</code><a class="el" href="class_nim_b_l_e_address.html#aa05f35ab6724a00c65dd096006dba2bb" title="Determine if this address is a NULL Address.">NimBLEAddress::isNull</a><code>methods to test if an address is NULL. -</code>NimBLEAddress::getValue<code>method which returns a read-only pointer to the address value. -</code><a class="el" href="class_nim_b_l_e_address.html#a0f390fb5f422db8ced1938bd40f87c4d" title="Reverse the byte order of the address.">NimBLEAddress::reverseByteOrder</a><code>method which will reverse the byte order of the address value. -</code>NimBLEHIDDevice::batteryLevel<code>returns the HID device battery level characteristic. -</code>NimBLEBeacon::setData<code>overload that takes</code>uint8_t* data<code>and</code>uint8_t length<code>. -</code>NimBLEHIDDevice::getPnp<code>function added to access the pnp characteristic. -</code>NimBLEHIDDevice::getHidInfo` function added to access the hid info characteristic.</li>
</ul>
<h1><a class="anchor" id="autotoc_md141---2022-10-30"></a>
[1.4.1] - 2022-10-30</h1>
<h2><a class="anchor" id="fixed-12"></a>
Fixed</h2>
<ul>
<li><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a> incorrect value when power level is -3db.</li>
<li>Failed pairing when already in progress.</li>
</ul>
<h2><a class="anchor" id="changed-7"></a>
Changed</h2>
<ul>
<li>Revert previous change that forced writing with response when subscribing in favor of allowing the application to decide.</li>
</ul>
<h2><a class="anchor" id="added-7"></a>
Added</h2>
<ul>
<li>Added NimBLEHIDDevice::batteryLevel.</li>
<li>Added <a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a> allowing for changing the device name while the BLE stack is active.</li>
<li>CI Builds</li>
</ul>
<h1><a class="anchor" id="autotoc_md140---2022-07-31"></a>
[1.4.0] - 2022-07-31</h1>
<h2><a class="anchor" id="fixed-13"></a>
Fixed</h2>
<ul>
<li>Fixed missing data from long notification values.</li>
<li>Fixed NimbleCharacteristicCallbacks::onRead not being called when a non-long read command is received.</li>
<li>Prevent a potential crash when retrieving characteristics from a service if the result was successful but no characteristics found.</li>
<li>logs/typos.</li>
</ul>
<h2><a class="anchor" id="changed-8"></a>
Changed</h2>
<ul>
<li>AD flags are no longer set in the advertisements of non-connectable beacons, freeing up 3 bytes of advertisement room.</li>
<li>Save resources when retrieving descriptors if the characteristic handle is the same as the end handle (no descriptors).</li>
<li>Subscribing to characteristic notifications/indications will now always use write with response, as per BLE specifications.</li>
<li><code>NimBLEClient::discoverAttributes</code> now returns a bool value to indicate success/failure.</li>
<li>Scan result callbacks are no longer called when the scan response data is updated in order to reduce duplicates.</li>
</ul>
<h2><a class="anchor" id="added-8"></a>
Added</h2>
<ul>
<li>Preliminary support for non-esp devices, NRF51 and NRF52 devices supported with <a href="https://github.com/h2zero/n-able-Arduino">n-able arduino core</a></li>
<li>Alias added for <code>NimBLEServerCallbacks::onMTUChange</code> to <code>onMtuChanged</code> in order to support porting code from original library.</li>
<li><code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a></code> Class added to reduce and control RAM footprint of characteristic/descriptor values and support conversions from Arduino Strings and many other data types.</li>
<li>Bluetooth 5 extended advertising support for capable devices. CODED Phy, 2M Phy, extended advertising data, and multi-advertising are supported, periodic advertising will be implemented in the future.</li>
</ul>
<h1><a class="anchor" id="autotoc_md133---2022-02-15"></a>
[1.3.3] - 2022-02-15</h1>
<h2><a class="anchor" id="changed-9"></a>
Changed</h2>
<ul>
<li>If attribute retrieval fails with a "not found" try again with the 16 bit version if a 128 bit base uuid is used.</li>
</ul>
<h2><a class="anchor" id="fixed-14"></a>
Fixed</h2>
<ul>
<li>Memory leak when deleting client instance.</li>
<li>IDf version check for data length extension.</li>
<li>Memory leak when server services changed.</li>
<li>Compiler warnings for non-esp32 devices.</li>
</ul>
<h1><a class="anchor" id="autotoc_md132---2022-01-15"></a>
[1.3.2] - 2022-01-15</h1>
<h2><a class="anchor" id="fixed-15"></a>
Fixed</h2>
<ul>
<li>Initialize advertising complete callback in <a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a> constructor.</li>
<li>Clear client disconnect timer in constructor before initializing.</li>
<li>Fix missing data when reading large values.</li>
<li>Fix missing data in notifications when using a large MTU size and more than 270 bytes of data are sent.</li>
<li>Workaround fix added for cases when the task notification value is not cleared, causing various functions that should block not to block.</li>
</ul>
<h2><a class="anchor" id="added-9"></a>
Added</h2>
<ul>
<li><code>NimBLEClient::getLastError</code> : Gets the error code of the last function call that produces a return code from the stack.</li>
<li><code>NimBLECharacteristic::notify</code> : Overload method to send notifications/indications with custom values.</li>
<li>Added conditional checks for ESP32 specific functions/values to support use of the library on non-esp32 devices.</li>
<li>Added an alias to use the callback name from the original library <code>onMtuChanged</code>.</li>
<li><code>NimBLEClient::setDataLen</code> and <code>NimBLEServer::setDataLen</code>: Data length extension support (IDF version &gt;= 4.3.2 only)</li>
<li>Config option to set logging level for esp-nimble-cpp</li>
</ul>
<h2><a class="anchor" id="changed-10"></a>
Changed</h2>
<ul>
<li>Critical section calls now use the NimBLE API instead of FreeRTOS directly. This removes the need for a <code>portMUX_TYPE</code> variable in the class definitions.</li>
<li>Removed unnecessary variables in <code>NimBLEService</code> and changed the constructor no no longer accept <code>numHandles</code> and <code>inst_id</code> parameters.</li>
</ul>
<h1><a class="anchor" id="autotoc_md131---2021-08-04"></a>
[1.3.1] - 2021-08-04</h1>
<h2><a class="anchor" id="fixed-16"></a>
Fixed</h2>
<ul>
<li>Corrected a compiler/linker error when an application or a library uses bluetooth classic due to the redefinition of <code>btInUse</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md130---2021-08-02"></a>
[1.3.0] - 2021-08-02</h1>
<h2><a class="anchor" id="added-10"></a>
Added</h2>
<ul>
<li><code>NimBLECharacteristic::removeDescriptor</code>: Dynamically remove a descriptor from a characteristic. Takes effect after all connections are closed and sends a service changed indication.</li>
<li><code>NimBLEService::removeCharacteristic</code>: Dynamically remove a characteristic from a service. Takes effect after all connections are closed and sends a service changed indication</li>
<li><code>NimBLEServerCallbacks::onMTUChange</code>: This is callback is called when the MTU is updated after connection with a client.</li>
<li>ESP32C3 support</li>
<li>Whitelist API:<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aabc68166b6dd4a744a98f94e569f37db" title="Add a peer address to the whitelist.">NimBLEDevice::whiteListAdd</a></code>: Add a device to the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a81abbad5e371fe1cdd91c002b42cc654" title="Remove a peer address from the whitelist.">NimBLEDevice::whiteListRemove</a></code>: Remove a device from the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ae51e2d4d6169a61133178a1b0d6b5b45" title="Checks if a peer device is whitelisted.">NimBLEDevice::onWhiteList</a></code>: Check if the device is on the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ab28cc2ec59fc9e62d05826633f53d2a0" title="Gets the count of addresses in the whitelist.">NimBLEDevice::getWhiteListCount</a></code>: Gets the size of the whitelist</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a4a2229e9e517b84773e65c75124b0789" title="Gets the address at the vector index.">NimBLEDevice::getWhiteListAddress</a></code>: Get the address of a device on the whitelist by index value.</li>
</ul>
</li>
<li>Bond management API:<ul>
<li><code>NimBLEDevice::getNumBonds</code>: Gets the number of bonds stored.</li>
<li><code>NimBLEDevice::isBonded</code>: Checks if the device is bonded.</li>
<li><code>NimBLEDevice::deleteAllBonds</code>: Deletes all bonds.</li>
<li><code>NimBLEDevice::getBondedAddress</code>: Gets the address of a bonded device by the index value.</li>
</ul>
</li>
<li><code>NimBLECharacteristic::getCallbacks</code> to retrieve the current callback handler.</li>
<li>Connection Information class: <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code>.</li>
<li><code>NimBLEScan::clearDuplicateCache</code>: This can be used to reset the cache of advertised devices so they will be immediately discovered again.</li>
</ul>
<h2><a class="anchor" id="changed-11"></a>
Changed</h2>
<ul>
<li>FreeRTOS files have been removed as they are not used by the library.</li>
<li>Services, characteristics and descriptors can now be created statically and added after.</li>
<li>Excess logging and some asserts removed.</li>
<li>Use ESP_LOGx macros to enable using local log level filtering.</li>
</ul>
<h2><a class="anchor" id="fixed-17"></a>
Fixed</h2>
<ul>
<li><code>NimBLECharacteristicCallbacks::onSubscribe</code> Is now called after the connection is added to the vector.</li>
<li>Corrected bonding failure when reinitializing the BLE stack.</li>
<li>Writing to a characteristic with a std::string value now correctly writes values with null characters.</li>
<li>Retrieving remote descriptors now uses the characteristic end handle correctly.</li>
<li>Missing data in long writes to remote descriptors.</li>
<li>Hanging on task notification when sending an indication from the characteristic callback.</li>
<li>BLE controller memory could be released when using Arduino as a component.</li>
<li>Compile errors with NimBLE release 1.3.0.</li>
</ul>
<h1><a class="anchor" id="autotoc_md120---2021-02-08"></a>
[1.2.0] - 2021-02-08</h1>
<h2><a class="anchor" id="added-11"></a>
Added</h2>
<ul>
<li><code>NimBLECharacteristic::getDescriptorByHandle</code>: Return the BLE Descriptor for the given handle.</li>
<li><code>NimBLEDescriptor::getStringValue</code>: Get the value of this descriptor as a string.</li>
<li><code>NimBLEServer::getServiceByHandle</code>: Get a service by its handle.</li>
<li><code>NimBLEService::getCharacteristicByHandle</code>: Get a pointer to the characteristic object with the specified handle.</li>
<li><code>NimBLEService::getCharacteristics</code>: Get the vector containing pointers to each characteristic associated with this service. Overloads to get a vector containing pointers to all the characteristics in a service with the UUID. (supports multiple same UUID's in a service)<ul>
<li><code>NimBLEService::getCharacteristics(const char *uuid)</code></li>
<li><code>NimBLEService::getCharacteristics(const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a> &amp;uuid)</code></li>
</ul>
</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> New methods:<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a3f227c597ec00f639e4bd26b80ce404b" title="Adds Tx power level to the advertisement data.">NimBLEAdvertisementData::addTxPower</a></code>: Adds transmission power to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#acee3a78f4c8d69a1dc3df1f9af16632f" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertisementData::setPreferredParams</a></code>: Adds connection parameters to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a852969e05a7884faf6cfcd2001f80ec9" title="Set the URI to advertise.">NimBLEAdvertisementData::setURI</a></code>: Adds URI data to the advertisement.</li>
</ul>
</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> New methods:<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a7fb4b74eb7acb1f46e57ff772baccd88" title="Set the advertised name of the device.">NimBLEAdvertising::setName</a></code>: Set the name advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ac433e3458ac5259ae21c4bdbd1198781" title="Set the advertised manufacturer data.">NimBLEAdvertising::setManufacturerData</a></code>: Adds manufacturer data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a9fe23a52ac3f699095d84d2ba8f90c28" title="Set the advertised URI.">NimBLEAdvertising::setURI</a></code>: Adds URI data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a></code>: Adds service data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a0d3c5cb3a93416a4206abb1f8e443ebf" title="Add the transmission power level to the advertisement packet.">NimBLEAdvertising::addTxPower</a></code>: Adds transmission power to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a91cde5680de36840fc18f6fd76665af7" title="Stops the current advertising and resets the advertising data to the default values.">NimBLEAdvertising::reset</a></code>: Stops the current advertising and resets the advertising data to the default values.</li>
</ul>
</li>
<li><code>NimBLEDevice::setScanFilterMode</code>: Set the controller duplicate filter mode for filtering scanned devices.</li>
<li><code>NimBLEDevice::setScanDuplicateCacheSize</code>: Sets the number of advertisements filtered before the cache is reset.</li>
<li><code>NimBLEScan::setMaxResults</code>: This allows for setting a maximum number of advertised devices stored in the results vector.</li>
<li><code>NimBLEAdvertisedDevice</code> New data retrieval methods added:<ul>
<li><code>haveAdvInterval/getAdvInterval</code>: checks if the interval is advertised / gets the advertisement interval value.</li>
<li><code>haveConnParams/getMinInterval/getMaxInterval</code>: checks if the parameters are advertised / get min value / get max value.</li>
<li><code>haveURI/getURI</code>: checks if a URI is advertised / gets the URI data.</li>
<li><code>haveTargetAddress/getTargetAddressCount/getTargetAddress(index)</code>: checks if a target address is present / gets a count of the addresses targeted / gets the address of the target at index.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="changed-12"></a>
Changed</h2>
<ul>
<li><code>nimconfig.h</code> (Arduino) is now easier to use.</li>
<li><code>NimBLEServer::getServiceByUUID</code> Now takes an extra parameter of instanceID to support multiple services with the same UUID.</li>
<li><code>NimBLEService::getCharacteristic</code> Now takes an extra parameter of instanceID to support multiple characteristics with the same UUID.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Transmission power is no longer advertised by default and can be added to the advertisement by calling <code><a class="el" href="class_nim_b_l_e_advertising.html#a0d3c5cb3a93416a4206abb1f8e443ebf" title="Add the transmission power level to the advertisement packet.">NimBLEAdvertising::addTxPower</a></code></li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Custom scan response data can now be used without custom advertisement.</li>
<li><code>NimBLEScan</code> Now uses the controller duplicate filter.</li>
<li><code>NimBLEAdvertisedDevice</code> Has been refactored to store the complete advertisement payload and no longer parses the data from each advertisement. Instead the data will be parsed on-demand when the user application asks for specific data.</li>
</ul>
<h2><a class="anchor" id="fixed-18"></a>
Fixed</h2>
<ul>
<li><code>NimBLEHIDDevice</code> Characteristics now use encryption, this resolves an issue with communicating with devices requiring encryption for HID devices.</li>
</ul>
<h1><a class="anchor" id="autotoc_md110---2021-01-20"></a>
[1.1.0] - 2021-01-20</h1>
<h2><a class="anchor" id="added-12"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> added to enable the use of random and random-resolvable addresses, by asukiaaa</li>
<li>New examples for securing and authenticating client/server connections, by mblasee.</li>
<li><code>NimBLEAdvertising::SetMinPreferred</code> and <code>NimBLEAdvertising::SetMinPreferred</code> re-added.</li>
<li>Conditional checks added for command line config options in <code>nimconfig.h</code> to support custom configuration in platformio.</li>
<li><code>NimBLEClient::setValue</code> Now takes an extra bool parameter <code>response</code> to enable the use of write with response (default = false).</li>
<li><code>NimBLEClient::getCharacteristic(uint16_t handle)</code> Enabling the use of the characteristic handle to be used to find the NimBLERemoteCharacteristic object.</li>
<li><code>NimBLEHIDDevice</code> class added by wakwak-koba.</li>
<li><code>NimBLEServerCallbacks::onDisconnect</code> overloaded callback added to provide a ble_gap_conn_desc parameter for the application to obtain information about the disconnected client.</li>
<li>Conditional checks in <code>nimconfig.h</code> for command line defined macros to support platformio config settings.</li>
</ul>
<h2><a class="anchor" id="changed-13"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> now returns a bool value to indicate success/failure.</li>
<li>Some asserts were removed in <code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> and replaced with better return code handling and logging.</li>
<li>If a host reset event occurs, scanning and advertising will now only be restarted if their previous duration was indefinite.</li>
<li><code>NimBLERemoteCharacteristic::subscribe</code> and <code>NimBLERemoteCharacteristic::registerForNotify</code> will now set the callback regardless of the existence of the CCCD and return true unless the descriptor write operation failed.</li>
<li>Advertising tx power level is now sent in the advertisement packet instead of scan response.</li>
<li><code>NimBLEScan</code> When the scan ends the scan stopped flag is now set before calling the scan complete callback (if used) this allows the starting of a new scan from the callback function.</li>
</ul>
<h2><a class="anchor" id="fixed-19"></a>
Fixed</h2>
<ul>
<li>Sometimes <code>NimBLEClient::connect</code> would hang on the task block if no event arrived to unblock. A time limit has been added to timeout appropriately.</li>
<li>When getting descriptors for a characteristic the end handle of the service was used as a proxy for the characteristic end handle. This would be rejected by some devices and has been changed to use the next characteristic handle as the end when possible.</li>
<li>An exception could occur when deleting a client instance if a notification arrived while the attribute vectors were being deleted. A flag has been added to prevent this.</li>
<li>An exception could occur after a host reset event when the host re-synced if the tasks that were stopped during the event did not finish processing. A yield has been added after re-syncing to allow tasks to finish before proceeding.</li>
<li>Occasionally the controller would fail to send a disconnected event causing the client to indicate it is connected and would be unable to reconnect. A timer has been added to reset the host/controller if it expires.</li>
<li>Occasionally the call to start scanning would get stuck in a loop on BLE_HS_EBUSY, this loop has been removed.</li>
<li>16bit and 32bit UUID's in some cases were not discovered or compared correctly if the device advertised them as 16/32bit but resolved them to 128bits. Both are now checked.</li>
<li><code>FreeRTOS</code> compile errors resolved in latest Arduino core and IDF v3.3.</li>
<li>Multiple instances of <code>time()</code> called inside critical sections caused sporadic crashes, these have been moved out of critical regions.</li>
<li>Advertisement type now correctly set when using non-connectable (advertiser only) mode.</li>
<li>Advertising payload length correction, now accounts for appearance.</li>
<li>(Arduino) Ensure controller mode is set to BLE Only.</li>
</ul>
<h1><a class="anchor" id="autotoc_md102---2020-09-13"></a>
[1.0.2] - 2020-09-13</h1>
<h2><a class="anchor" id="changed-14"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> Now takes 2 optional parameters, the first is the duration to advertise for (in seconds), the second is a callback that is invoked when advertising ends and takes a pointer to a <code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> object (similar to the <code>NimBLEScan::start</code> API).</li>
<li>(Arduino) Maximum BLE connections can now be altered by only changing the value of <code>CONFIG_BT_NIMBLE_MAX_CONNECTIONS</code> in <code>nimconfig.h</code>. Any changes to the controller max connection settings in <code>sdkconfig.h</code> will now have no effect when using this library.</li>
<li>(Arduino) Revert the previous change to fix the advertising start delay. Instead a replacement fix that routes all BLE controller commands from a task running on core 0 (same as the controller) has been implemented. This improves response times and reliability for all BLE functions.</li>
</ul>
<h1><a class="anchor" id="autotoc_md101---2020-09-02"></a>
[1.0.1] - 2020-09-02</h1>
<h2><a class="anchor" id="added-13"></a>
Added</h2>
<ul>
<li>Empty <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a></code> constructor: <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress()</a></code> produces an address of 00:00:00:00:00:00 type 0.</li>
<li>Documentation of the difference of NimBLEAddress::getNative vs the original bluedroid library.</li>
</ul>
<h2><a class="anchor" id="changed-15"></a>
Changed</h2>
<ul>
<li>notify_callback typedef is now defined as std::function to enable the use of std::bind to call a class member function.</li>
</ul>
<h2><a class="anchor" id="fixed-20"></a>
Fixed</h2>
<ul>
<li>Fix advertising start delay when first called.</li>
</ul>
<h1><a class="anchor" id="autotoc_md100---2020-08-22"></a>
[1.0.0] - 2020-08-22</h1>
<p>First stable release.</p>
<p>All the original library functionality is complete and many extras added with full documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
